{"ledger_id":"led_01KGAKHHN4AKKTY8Z3MD6FZWDH","ts":"2026-01-31T18:02:48.356020Z","author":"ingest-agent","reason":"Create a concise source summary of the provided 'tech-stack' document for future reference.","op":"upsert_knowledge","doc_path":"summaries/sources/tech-stack.md","doc_id":"mem_01KGAKHHN3WQFQMM8RS62SYM6H","new_hash":"49af6861d61777cd2f93634459610ba3bbd50c87e7837ab6ed2d29280af0bb62","patch":{"doc_path":"summaries/sources/tech-stack.md","title":"tech-stack (source summary)","type":"source_summary","status":"active","tags_add":["tech-stack","constraints","tbd"],"confidence":0.78,"body_append":"## Summary\nDocument captures an early-stage **Technical Stack & Decisions** placeholder. All major stack choices are **TBD** across frontend (framework, styling, state management), backend (language, framework, database), infrastructure (hosting, CI/CD, monitoring), and third‑party services/integrations.\n\nThe only concrete information is a set of **constraints** shaping future decisions:\n- Team size: **2-person team**, with **1 technical** contributor.\n- Funding: **pre-funding / bootstrapped**.\n- Priority: **speed to market is critical**.\n\nSections for “Technical Principles” and “Third-Party Services” exist but are not yet filled in. Last updated: **2025-01-23**.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKH3Q294ST9VDHFF0Q9Y8A"]}]}}
{"ledger_id":"led_01KGAKHHN4T9JFH2XRS1H8CM8P","ts":"2026-01-31T18:02:48.356655Z","author":"ingest-agent","reason":"Capture explicit delivery/strategy preference that speed to market is critical.","op":"upsert_knowledge","doc_path":"knowledge/prefs/speed-to-market.md","doc_id":"mem_01KGAKHHN4ZRN77QF75YFDB5KS","new_hash":"58818e08184ca8f98abedd9809dac32f100d1aff774be4529deebd8405c47726","patch":{"doc_path":"knowledge/prefs/speed-to-market.md","title":"Preference: Speed to market","type":"preference","status":"active","tags_add":["preference","delivery","strategy"],"confidence":0.8,"body_append":"## Statement\nSpeed to market is critical.\n\n## Implications\nWhen making technical decisions (stack, tooling, infra), prefer options that minimize time-to-first-release and reduce implementation/ops burden, given current team and funding constraints.\n\n## Source\n- tech-stack (Last updated 2025-01-23)\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKH3Q294ST9VDHFF0Q9Y8A"]}]}}
{"ledger_id":"led_01KGAKHHN5R7EKVW5FY4BC1TXG","ts":"2026-01-31T18:02:48.357303Z","author":"ingest-agent","reason":"Record team/funding constraints as system facts for planning and decision-making.","op":"upsert_knowledge","doc_path":"knowledge/system/team-and-funding-constraints.md","doc_id":"mem_01KGAKHHN4R2MM3DDDEP2HXJ6B","new_hash":"61229d2e095ebef4b650115c1996c7326940a2b82943b4be6f37b9d88291ad96","patch":{"doc_path":"knowledge/system/team-and-funding-constraints.md","title":"System: Team & funding constraints","type":"system","status":"active","tags_add":["constraints","team","funding"],"confidence":0.82,"body_append":"## Constraints\n- Team: 2-person team; 1 technical contributor.\n- Funding stage: pre-funding / bootstrapped.\n\n## Notes\nThese constraints should inform technical scope, tooling choices, and operational complexity.\n\n## Source\n- tech-stack (Last updated 2025-01-23)\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKH3Q294ST9VDHFF0Q9Y8A"]}]}}
{"ledger_id":"led_01KGAKJQS4TJS35W8SD715NZ8A","ts":"2026-01-31T18:03:27.396550Z","author":"ingest-agent","reason":"Create a source summary for the provided company context document (LoopWork).","op":"upsert_knowledge","doc_path":"summaries/sources/company.md","doc_id":"mem_01KGAKJQS433RCCNF8AG32GM26","new_hash":"80f0fe2a409cb2a3fd88eabc59d28a8bb67633fb709fcb3ae73ecf55bc56293f","patch":{"doc_path":"summaries/sources/company.md","title":"LoopWork - Company Context (source summary)","type":"source_summary","status":"active","tags_add":["company","context","loopwork"],"confidence":0.9,"body_append":"## Summary\nLoopWork is a pre-product company exploring product–market fit with approximately ~$2M in cash runway. The near-term focus (Q1 2025) is building “Cursor/Claude Code for media”: AI-assisted creative tooling, starting with images in Q1 and with interest in moving into video next.\n\nThe team consists of two founders:\n- Jesse Andrews (CTO, Berkeley, CA; GitHub @anotherjesse). Background includes early work building OpenStack at NASA, leadership at Planet.com as SVP Product/Eng scaling the team to ~75, and deep AI work (2018–2021) including embeddings and autoencoders. He has built multiple large open-source projects (including userscripts.org) and formed early conviction in LLMs after seeing Riley Goodside’s GPT-3 graphviz demo. A key insight is that LLMs can bridge communication gaps across disciplines (e.g., legal/product/engineering/marketing).\n- Carl Peaslee (CEO, San Francisco, CA; GitHub @carlpeaslee). Characterized as technical plus business-oriented, able to both code and drive go-to-market.\n\nCurrent status: funding/runway is in place, but the product direction is still being defined; there is no MVP, no first users, and no revenue/market awareness yet.\n\nThe company previously explored a developer tools concept called Vibewire, with parts still used internally, but pivoted away from dev tools due to perceived oversaturation and heavy investment by large model companies.\n\nStrategically, LoopWork is considering two paths: (1) a product path building toward revenue, or (2) an awareness/reputation path aimed at increasing acquihire potential.\n\n*Source last updated: 2025-01-23*","sources_add":[{"thread_id":"","event_ids":["src_01KGAKHQV1JD69416ZPE0RZ06Q"]}]}}
{"ledger_id":"led_01KGAKJQS55CE9N3S76YYZ8TGY","ts":"2026-01-31T18:03:27.397350Z","author":"ingest-agent","reason":"Add a project doc for LoopWork as the company/venture described in the source.","op":"upsert_knowledge","doc_path":"knowledge/projects/loopwork.md","doc_id":"mem_01KGAKJQS5XNJZQ9QZK45HSK37","new_hash":"0d60f841b28ce40ff22ccb585e5c1dcef6a22dfef5ac62e0c9082aba5c5c714d","patch":{"doc_path":"knowledge/projects/loopwork.md","title":"LoopWork","type":"project","status":"active","tags_add":["company","startup","ai","media-tools"],"confidence":0.88,"body_append":"## Snapshot\n- Stage: pre-product; exploring product–market fit.\n- Runway: ~$2M cash.\n- Focus (Q1 2025): “Cursor/Claude Code for media” — AI-assisted creative tools.\n- Initial modality: images (Q1 2025), with interest in video next.\n\n## Team\n- CEO: Carl Peaslee (SF; GitHub @carlpeaslee)\n- CTO: Jesse Andrews (Berkeley; GitHub @anotherjesse)\n\n## Status (as of 2025-01-23)\n- Funding/runway: ✅\n- Product defined: ❌ (direction under exploration)\n- MVP built: ❌\n- First users: ❌\n- Revenue / market awareness: ❌\n\n## Strategy under consideration\n1. Product path: build toward revenue.\n2. Awareness path: build reputation with an eye toward acquihire.\n\n## Notes\nThe company previously explored a dev-tools concept (Vibewire) but pivoted away from dev tools due to perceived oversaturation and major investment by large model companies.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKHQV1JD69416ZPE0RZ06Q"]}]}}
{"ledger_id":"led_01KGAKJQS5VEZAHV8Z0QPAPPEH","ts":"2026-01-31T18:03:27.397956Z","author":"ingest-agent","reason":"Create a person doc for Jesse Andrews, the CTO mentioned in the source.","op":"upsert_knowledge","doc_path":"knowledge/people/jesse-andrews.md","doc_id":"mem_01KGAKJQS54M6BHQQFF9JPMHRS","new_hash":"e952272306f79203d7e6be0dc8a123af33511fb0e9c962bd62e2a6d2c3678e97","patch":{"doc_path":"knowledge/people/jesse-andrews.md","title":"Jesse Andrews","type":"person","status":"active","tags_add":["cto","founder","engineering","ai"],"confidence":0.9,"body_append":"## Role\n- CTO at LoopWork\n\n## Location\n- Berkeley, CA\n\n## Profiles\n- GitHub: @anotherjesse\n\n## Background\n- Built OpenStack at NASA (helped start the project and built the team).\n- Planet.com: SVP Product/Engineering; scaled team to ~75; later Fellow.\n- Deep AI experience (2018–2021): embeddings, autoencoders.\n- Created userscripts.org; built multiple large open-source projects.\n\n## Notable beliefs / insights\n- Belief that LLMs can bridge communication gaps between disciplines (e.g., legal, product, engineering, marketing).\n- Early LLM conviction influenced by Riley Goodside’s GPT-3 graphviz demo.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKHQV1JD69416ZPE0RZ06Q"]}]}}
{"ledger_id":"led_01KGAKJQS60DWTN74T650APHQQ","ts":"2026-01-31T18:03:27.398439Z","author":"ingest-agent","reason":"Create a person doc for Carl Peaslee, the CEO mentioned in the source.","op":"upsert_knowledge","doc_path":"knowledge/people/carl-peaslee.md","doc_id":"mem_01KGAKJQS6DY197BCG7CM7GTWF","new_hash":"bd76e67b3b0ae8e1a7171d426e106151854ba147e744aa539a53323cfa6aa7cf","patch":{"doc_path":"knowledge/people/carl-peaslee.md","title":"Carl Peaslee","type":"person","status":"active","tags_add":["ceo","founder","gtm"],"confidence":0.85,"body_append":"## Role\n- CEO at LoopWork\n\n## Location\n- San Francisco, CA\n\n## Profiles\n- GitHub: @carlpeaslee\n\n## Background\n- Described as both technical and business-oriented: can code and drive go-to-market.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKHQV1JD69416ZPE0RZ06Q"]}]}}
{"ledger_id":"led_01KGAKJQS6BP9FQ9Q0GT5D8FB7","ts":"2026-01-31T18:03:27.398842Z","author":"ingest-agent","reason":"Capture the Vibewire effort as a discrete prior project referenced in the source.","op":"upsert_knowledge","doc_path":"knowledge/projects/vibewire.md","doc_id":"mem_01KGAKJQS6CEZ9R0YHCS8MFYFB","new_hash":"e27c058a6e6d9e7a87106be9fb425444de1e537f6e475b07c295d3c72515ac70","patch":{"doc_path":"knowledge/projects/vibewire.md","title":"Vibewire","type":"project","status":"active","tags_add":["dev-tools","internal-tooling","prior-work"],"confidence":0.8,"body_append":"## Summary\nVibewire was a developer-tools concept explored prior to LoopWork’s current “AI for media” direction. The company pivoted away from dev tools, citing an oversaturated market and heavy investment by large model companies.\n\n## Current usage\n- Parts of Vibewire are reportedly still used internally.\n\n## Status\n- Not the current product direction (pivoted away).\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKHQV1JD69416ZPE0RZ06Q"]}]}}
{"ledger_id":"led_01KGAKJQS7SXP00FG9R99ERMNK","ts":"2026-01-31T18:03:27.399409Z","author":"ingest-agent","reason":"Update existing system constraint doc to align with the company context (runway and stage) and avoid inconsistent funding notes.","op":"upsert_knowledge","doc_path":"knowledge/system/team-and-funding-constraints.md","doc_id":"mem_01KGAKHHN4R2MM3DDDEP2HXJ6B","prev_hash":"61229d2e095ebef4b650115c1996c7326940a2b82943b4be6f37b9d88291ad96","new_hash":"4b1e486a849754b898595043490ef3a13d6376ab68f7f02c4bf6b9a4bc1ce105","patch":{"doc_path":"knowledge/system/team-and-funding-constraints.md","status":"active","confidence":0.85,"body_append":"\n\n## Update (LoopWork context)\n- Company stage: pre-product; exploring product–market fit.\n- Runway: approximately ~$2M cash.\n\n> Note: This source indicates meaningful runway; prior notes describing the funding stage as “pre-funding / bootstrapped” may be outdated depending on how the ~$2M cash position was obtained.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKHQV1JD69416ZPE0RZ06Q"]}]}}
{"ledger_id":"led_01KGAKKHCCADH6Y9CGBA7ERABT","ts":"2026-01-31T18:03:53.612877Z","author":"ingest-agent","reason":"Create a source summary for the provided roadmap document.","op":"upsert_knowledge","doc_path":"summaries/sources/roadmap.md","doc_id":"mem_01KGAKKHCCPGCG1BQZ3S0PC525","new_hash":"c392ffbec38dcf1d30b42acfb7ae16dd3c496094abe9d1913cb17edd85a5d5e7","patch":{"doc_path":"summaries/sources/roadmap.md","title":"Technical Roadmap (Discovery & Definition) — source summary","type":"source_summary","tags_add":["roadmap","planning","technical"],"confidence":0.74,"body_append":"## Summary\nThis document is a lightweight, templated technical roadmap capturing a product’s early planning state. The **current phase** is **Discovery & Definition**, indicating that product scope and architecture are still being defined.\n\nIt lays out four milestone phases:\n1. **Foundation**: define product scope, choose a technical stack, set up the development environment, and create an initial architecture.\n2. **MVP**: build three unspecified “core features” and establish a basic deployment pipeline.\n3. **Launch**: add user authentication, production infrastructure, monitoring/alerting, and complete an initial launch.\n4. **Iteration**: integrate user feedback, optimize performance, and expand features.\n\nA **current sprint/focus** section is present for the **week of 2025-01-23**, but both “This Week” and “Next Week” task lists are empty. A backlog section exists but is essentially blank (single dash placeholder). The document was **last updated 2025-01-23**.\n\n## Key takeaways / implications\n- The plan is at a high level with placeholders (core features undefined), consistent with early-stage discovery.\n- Near-term process is intended to be sprint-based, but execution details have not been filled in yet.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKK3894WSZRDHMV3ZCF7AF"]}]}}
{"ledger_id":"led_01KGAKKHCDV9RF3D6N5PP1BTXA","ts":"2026-01-31T18:03:53.613669Z","author":"ingest-agent","reason":"Record a system/planning fact about the current phase and roadmap structure for future reference.","op":"upsert_knowledge","doc_path":"knowledge/system/technical-roadmap-phase.md","doc_id":"mem_01KGAKKHCDGD35D9PMWVK942HN","new_hash":"328eb05fcee1ed0df5e31089a5641be0abccb897220b36e920933e910d8f8b0f","patch":{"doc_path":"knowledge/system/technical-roadmap-phase.md","title":"Technical roadmap phase and milestone structure","type":"system","tags_add":["roadmap","planning"],"confidence":0.7,"body_append":"## Fact\nAs of **2025-01-23**, the technical roadmap is in **Discovery & Definition**.\n\n## Milestone structure\n- **Phase 1: Foundation** — define product scope; choose technical stack; set up development environment; create initial architecture.\n- **Phase 2: MVP** — implement three placeholder core features; create a basic deployment pipeline.\n- **Phase 3: Launch** — user authentication; production infrastructure; monitoring & alerting; initial launch.\n- **Phase 4: Iteration** — user feedback integration; performance optimization; feature expansion.\n\n## Notes\n- Weekly sprint sections exist (\"This Week\" / \"Next Week\") but were empty for the week of 2025-01-23.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKK3894WSZRDHMV3ZCF7AF"]}]}}
{"ledger_id":"led_01KGAKMBWCZBRWVPBXBWE42MPR","ts":"2026-01-31T18:04:20.748179Z","author":"ingest-agent","reason":"Create a source summary of the provided OpenClaw technical architecture document for later retrieval.","op":"upsert_knowledge","doc_path":"summaries/sources/compass-artifact-wf-1cec5d07-e9be-4524-a854-c221ae1f9ce0-text-markdown.md","doc_id":"mem_01KGAKMBWBN9T7YVXKMJ9X442P","new_hash":"755eb1ffe62a4ea56d83fe04cfea5e7a89eda20e892c79b1f7eb4d0c429a10ef","patch":{"doc_path":"summaries/sources/compass-artifact-wf-1cec5d07-e9be-4524-a854-c221ae1f9ce0-text-markdown.md","title":"OpenClaw architecture deep-dive (gateway-centric agent framework)","type":"source_summary","tags_add":["openclaw","architecture","agents","gateway","websocket","scheduling","tools"],"confidence":0.9,"body_append":"## Summary\n\nOpenClaw is a **gateway-centric AI agent framework** designed for an “always-on”, local-first personal assistant. A single long-running **Gateway daemon** (Node.js ≥22, TypeScript) serves as the **control plane** for channel connectivity, session management, routing, scheduling, and tool execution. All messaging channels (e.g., WhatsApp via Baileys, Telegram via grammY, Discord via discord.js, Slack via Bolt) terminate in the Gateway, which exposes a typed **WebSocket control plane** at `ws://127.0.0.1:18789`. The protocol uses three frame types—`req`, `res`, `event`—and requires an initial authenticated `connect` handshake; side-effecting methods require **idempotency keys** for safe retries.\n\nIncoming messages are routed to agents using **binding rules** (most-specific match by channel/account/peer/guild). The core **agent loop** returns early acceptance (`{runId, acceptedAt}`), then serializes work through a **per-session queue**, preventing concurrency races (analogous to GenServer-per-session). Sessions are hierarchically keyed, e.g., `agent:<agentId>:<channel>:dm:<peerId>` and `agent:<agentId>:<channel>:group:<id>`. The run pipeline includes context assembly from workspace files (AGENTS.md, SOUL.md), LLM inference with streaming, sandboxed tool execution with sanitization, event streaming of deltas, and persistence to JSONL transcripts with token accounting.\n\nScheduling runs inside the Gateway via **cron jobs** and **heartbeats**. Cron supports `at`, `every`, and `cron` expression schedules, with two modes: **main session** jobs inject system events into the ongoing main session, while **isolated** jobs create fresh sessions (`cron:<jobId>`) whose results are posted back. Heartbeats (default every 30 minutes) read `HEARTBEAT.md` to decide between emitting alerts or returning `HEARTBEAT_OK` (dropped).\n\nDurable memory is file-based (`~/.openclaw/workspace/memory/YYYY-MM-DD.md`, `MEMORY.md`, JSONL session transcripts). Each agent has an isolated workspace/session store/auth profile directory to prevent credential leakage.\n\nTools are defined with **TypeBox** schemas and governed by a layered **skill** system (`SKILL.md` with YAML frontmatter). Skills are loaded with precedence (workspace > managed > bundled) and gated by environment/binaries/config/OS. Tool access is controlled via per-agent allow/deny lists and presets (`minimal`, `coding`, `messaging`, `full`), plus groups (e.g., `group:fs`, `group:web`). Coordination primarily occurs through Gateway RPC; optional agent-to-agent tools (`sessions_send`, `sessions_spawn`) are disabled by default and allowlisted when enabled, with recursion prevented for spawned sub-agents.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKJXVY906XCK7PZ4K4TCT8"]}]}}
{"ledger_id":"led_01KGAKMBWCSFMMQ44WG82H13Y3","ts":"2026-01-31T18:04:20.748881Z","author":"ingest-agent","reason":"Capture the OpenClaw project and its defining architectural traits as a discrete project knowledge item.","op":"upsert_knowledge","doc_path":"knowledge/projects/openclaw.md","doc_id":"mem_01KGAKMBWCEZTTJG80RZC52GFN","new_hash":"27be11da39f4077986cc97ce187bb51da4161e9b6583406a02f521987bd80419","patch":{"doc_path":"knowledge/projects/openclaw.md","title":"OpenClaw","type":"project","tags_add":["ai-agent-framework","gateway","local-first","nodejs","typescript"],"confidence":0.88,"body_append":"## Overview\n\nOpenClaw is a **gateway-centric AI agent framework** for an always-on, local-first personal assistant. A single long-running **Gateway daemon** is the central control plane for messaging channel connections, session routing/serialization, scheduling (cron + heartbeats), and tool execution.\n\n## Key architectural components\n\n- **Gateway daemon (single control plane)**\n  - Runs on **Node.js ≥22** (TypeScript).\n  - Exposes a WebSocket control plane: `ws://127.0.0.1:18789`.\n  - Enforces **one Gateway per host** (e.g., due to WhatsApp Web session constraints).\n  - Owns channel connectivity (examples mentioned): WhatsApp (Baileys), Telegram (grammY), Discord (discord.js), Slack (Bolt).\n\n- **Typed WebSocket protocol**\n  - Frame types: `req`, `res`, `event`.\n  - First frame must be authenticated `connect` handshake.\n  - Side-effecting calls (e.g., `agent`, `send`) require **idempotency keys** for safe retries.\n\n- **Session-based serialization**\n  - Agent runs are queued **per session key** to avoid tool/session race conditions (GenServer-per-session analogue).\n  - Example keys: `agent:<agentId>:<channel>:dm:<peerId>`, `agent:<agentId>:<channel>:group:<id>`.\n\n- **Scheduling**\n  - Cron job schedules: `at`, `every`, `cron`.\n  - Job session modes:\n    - `main`: inject system event into existing main session.\n    - `isolated`: runs in fresh session `cron:<jobId>` and posts results back.\n  - Heartbeats: periodic proactive turns in main session (default stated: every 30 minutes) driven by `HEARTBEAT.md`.\n  - Cron persistence: `~/.openclaw/cron/jobs.json`; concurrency limited by `maxConcurrentRuns`.\n\n- **Durable memory and isolation**\n  - File-based memory: `~/.openclaw/workspace/memory/YYYY-MM-DD.md` (daily append-only) and `~/.openclaw/workspace/MEMORY.md` (curated).\n  - Sessions persisted as JSONL transcripts.\n  - Each agent has isolated workspace/session store/auth profile directories; auth profiles are not shared automatically.\n\n## Tools and skills\n\n- Tools use **TypeBox** (`@sinclair/typebox`) schemas with runtime validation.\n- Skills are defined in `SKILL.md` files with YAML frontmatter; loaded with precedence **workspace > managed > bundled** and gated by required binaries/env/config/OS.\n- Tool access is controlled per agent via allow/deny lists and presets (`minimal`, `coding`, `messaging`, `full`) plus group shorthands (`group:fs`, `group:web`, etc.).\n\n## Security model (layering)\n\nDescribed as layered controls: DM policy → group policy (mention gating) → tool policy (allow/deny) → sandboxing (Docker isolation) → exec approvals; defaults are fail-closed with explicit escape hatches.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKJXVY906XCK7PZ4K4TCT8"]}]}}
{"ledger_id":"led_01KGAKMBWDZX0J04M9A9ETA57J","ts":"2026-01-31T18:04:20.749272Z","author":"ingest-agent","reason":"Record system-level protocol and runtime facts (Gateway WebSocket endpoint, framing, idempotency) as reusable system knowledge.","op":"upsert_knowledge","doc_path":"knowledge/system/openclaw-gateway-control-plane.md","doc_id":"mem_01KGAKMBWDGVFAH74HN8TZR9WM","new_hash":"acd06e6ac11ad4ea690c33ab4b2639edb522670b73ebd6ea8529db666d92b0d0","patch":{"doc_path":"knowledge/system/openclaw-gateway-control-plane.md","title":"OpenClaw Gateway control plane (WebSocket RPC)","type":"system","tags_add":["openclaw","websocket","rpc","idempotency"],"confidence":0.86,"body_append":"## Gateway control plane\n\n- OpenClaw uses a single long-running **Gateway daemon** as the control plane.\n- The Gateway exposes a WebSocket endpoint: `ws://127.0.0.1:18789`.\n- The Gateway hard-enforces **one Gateway per host**.\n\n## WebSocket framing protocol\n\n- Frame types:\n  - `req`: client request with `method` and `params`.\n  - `res`: server response.\n  - `event`: server-push messages used for streaming/deltas.\n- The first frame must be a `connect` handshake with authentication; the Gateway closes the connection otherwise.\n- Side-effecting RPC methods (e.g., `agent`, `send`) require **idempotency keys** so clients can safely retry.\n\n## Session routing and serialization\n\n- Routing uses binding rules with “most-specific-wins” matching by channel/account/peer/guild.\n- Agent runs are **serialized per session key** via a per-session queue to prevent concurrent state/tool races.\n- Example session key formats:\n  - DMs: `agent:<agentId>:<channel>:dm:<peerId>`\n  - Groups: `agent:<agentId>:<channel>:group:<id>`\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKJXVY906XCK7PZ4K4TCT8"]}]}}
{"ledger_id":"led_01KGAKMBWDPR513ABJ219T2HG1","ts":"2026-01-31T18:04:20.749558Z","author":"ingest-agent","reason":"Capture OpenClaw scheduling semantics (cron vs heartbeat, main vs isolated sessions, persistence) as system facts.","op":"upsert_knowledge","doc_path":"knowledge/system/openclaw-scheduling.md","doc_id":"mem_01KGAKMBWDSWT4DRET861KA07T","new_hash":"4ab40b8c150d17391b0bb7056252e0f23add022e5432d10079a4008635f99e9f","patch":{"doc_path":"knowledge/system/openclaw-scheduling.md","title":"OpenClaw scheduling (cron jobs and heartbeats)","type":"system","tags_add":["openclaw","cron","heartbeat","scheduling"],"confidence":0.85,"body_append":"## Scheduling mechanisms\n\nOpenClaw scheduling runs **inside the Gateway process** (no separate scheduler daemons).\n\n### Cron jobs\n\n- Supported schedule types:\n  - `at` (one-shot)\n  - `every` (fixed interval)\n  - `cron` (cron expression)\n- **Session modes**:\n  - `main`: injects a system event into the existing main session (handled during the agent’s regular cycles with full context; no new instance).\n  - `isolated`: runs a dedicated agent turn in a fresh session keyed as `cron:<jobId>`; each run has no prior conversation carry-over and posts results back to the main session.\n- Persistence: jobs are stored in `~/.openclaw/cron/jobs.json` across Gateway restarts.\n- Concurrency control: `maxConcurrentRuns`.\n\n### Heartbeats\n\n- Heartbeats are periodic agent turns in the **main session** (default mentioned: every 30 minutes).\n- The agent reads `HEARTBEAT.md` from the workspace and either:\n  - returns `HEARTBEAT_OK` (message dropped), or\n  - surfaces an alert to the user.\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKJXVY906XCK7PZ4K4TCT8"]}]}}
{"ledger_id":"led_01KGAKMBWE97SH6PMNP60JH6HF","ts":"2026-01-31T18:04:20.750045Z","author":"ingest-agent","reason":"Document OpenClaw tool/skill definition and validation approach (TypeBox, SKILL.md frontmatter, precedence/gating) as system knowledge.","op":"upsert_knowledge","doc_path":"knowledge/system/openclaw-tools-and-skills.md","doc_id":"mem_01KGAKMBWDMP063JZNZCGRJ3TH","new_hash":"678e3bc44412a55a3107077f13db8f30754527c2cc5b0a32595c7d35240d3354","patch":{"doc_path":"knowledge/system/openclaw-tools-and-skills.md","title":"OpenClaw tools and skills system (TypeBox + SKILL.md)","type":"system","tags_add":["openclaw","tools","typebox","skills"],"confidence":0.84,"body_append":"## Tools\n\n- Tools are defined with **TypeBox** schemas (`@sinclair/typebox`) to provide typed parameter definitions with runtime validation.\n- Schema guardrails mentioned:\n  - Avoid `Type.Union` (i.e., avoid `anyOf`/`oneOf`/`allOf`).\n  - Prefer `Type.Optional()` instead of `| null`.\n  - Keep the top-level schema as `type: \"object\"` with `properties`.\n\n## Skills\n\n- Skills are higher-level capabilities defined in `SKILL.md` files with YAML frontmatter (e.g., `name`, `description`, and metadata such as required binaries or environment variables).\n- **Precedence hierarchy**: workspace skills override managed skills, which override bundled skills.\n- **Load-time gating** filters skills based on required:\n  - binaries\n  - environment variables\n  - config paths\n  - OS platform\n\n## Tool availability controls\n\n- Tools can be allow/deny listed per agent.\n- Profile presets are mentioned: `minimal`, `coding`, `messaging`, `full`.\n- Tool groups provide shorthands, e.g.:\n  - `group:fs` (file ops)\n  - `group:runtime` (exec/process)\n  - `group:web` (search/fetch)\n","sources_add":[{"thread_id":"","event_ids":["src_01KGAKJXVY906XCK7PZ4K4TCT8"]}]}}
{"ledger_id":"led_01KGAKMW97YBRRP91JDVPRD2MT","ts":"2026-01-31T18:04:37.543716Z","author":"ingest-agent","reason":"Add source summary for the provided Sparks document.","op":"upsert_knowledge","doc_path":"summaries/sources/sparks.md","doc_id":"mem_01KGAKMW97ZEA3AK14GBMAJ61T","new_hash":"24c3b284acc4dc65a9107df2bb55f6af371ad81b5bbedd94a4f06afc62bf7d7b","patch":{"doc_path":"summaries/sources/sparks.md","title":"sparks (source summary)","type":"source_summary","tags_add":["sparks","dev-tools","agentic-compute","containers","btrfs","rust"],"confidence":0.88,"body_append":"## Summary\nSparks is a CLI-first system for creating **instant sandbox environments** (“sparks”) that run in isolated containers with **persistent filesystems**. Each spark has its own root filesystem backed by **btrfs snapshots**, enabling fast lifecycle operations and hard snapshot/restore. The repository is `github.com/loopwork/sparks`, with a local path noted as `~/lw/sparks`. It is written in **Rust** and described as Jesse’s first Rust project (tagline: “if it compiles, it works”). Sparks is positioned as a spiritual successor to **Vibewire**, previously a monolithic Elixir system.\n\nThe philosophy emphasizes a **simple CLI that does one thing well**, avoiding an “all-in-one monster.” It distinguishes responsibilities: **coding agents** should own code and tests, while **humans** own verification via automated QA/smoke tests; agent-generated passing tests are not treated as sufficient proof of correctness.\n\nCore commands include lifecycle management (`spark create/delete/stop/resume`), running commands and shells (`spark exec/console`), snapshotting (`spark snapshot create/restore`), templating (`spark base`), persistent cross-spark volumes (`spark data`), and **1Password** integration (`spark secrets`). It supports project-based namespace isolation (auto-detected from git repos) and ephemeral sparks denoted with `-` that auto-delete on exit.\n\nSparks auto-mounts shared volumes: `/spark/bin` (global executables), `/spark/all` (global shared data), and `/spark/proj` (per-project shared data).\n\nThe broader vision frames Sparks as “agentic-first cloud compute,” analogous to OpenStack’s role for VMs. It argues that “frozen” agent-built apps feel “dead” and explores blurred boundaries between dev mode and shipped product, static apps vs. just-in-time interfaces, and human collaboration mediated by agents. A validated capability (2025-01-24) is that unannounced btrfs snapshots work with stateful apps: Postgres survives via WAL crash recovery, supporting “fork anything anytime.” Status as of 2025-01-23: focusing on making Sparks able to develop itself by moving development “onto the inside,” refining git workflows and source/data trust boundaries, and building composable “LEGOs.”","sources_add":[{"thread_id":"","event_ids":["src_01KGAKKWB9TDHWX5V9423PZ1BG"]}]}}
{"ledger_id":"led_01KGAKMW98J27XMVBJEJXHQJ87","ts":"2026-01-31T18:04:37.544347Z","author":"ingest-agent","reason":"Create a project record for Sparks capturing what it is, features, architecture, and vision.","op":"upsert_knowledge","doc_path":"knowledge/projects/sparks.md","doc_id":"mem_01KGAKMW982JM8K4E646GW9JYB","new_hash":"4bcf1424b0bc24f72952926224d255c2f320b0bc48e2402d81f668c05de04108","patch":{"doc_path":"knowledge/projects/sparks.md","title":"Sparks","type":"project","tags_add":["dev-tools","agentic-compute","containers","btrfs","rust","cli"],"confidence":0.9,"body_append":"## Summary\nSparks provides instant sandbox environments (“sparks”) in isolated containers with **persistent filesystems** backed by **btrfs snapshots**. It is a CLI tool intended to be fast and composable.\n\n- Repo: https://github.com/loopwork/sparks\n- Local path (as noted in source): `~/lw/sparks`\n- Language: Rust\n- Lineage: spiritual child of **Vibewire** (monolithic Elixir system)\n\n## Philosophy\n- Simple CLI that does one thing well (avoid all-in-one systems).\n- Coding agents own code + tests.\n- Humans own verification flow (automated QA / smoke tests).\n- Treat agent output like outsourced dev: passing tests ≠ “right for you.”\n\n## Core features / commands\n- Lifecycle: `spark create`, `delete`, `stop`, `resume`\n- Execution: `spark exec`, `spark console`\n- Snapshots: `spark snapshot create`, `restore` (btrfs)\n- Templates: `spark base` (save a spark as a template)\n- Persistent volumes: `spark data` (share data across sparks)\n- Secrets: `spark secrets` (1Password integration)\n- Namespacing: “Projects” for namespace isolation; auto-detect from git repo\n- Ephemeral sparks: `-` creates an auto-deleting spark on exit\n\n## System volumes (auto-mounted)\n- `/spark/bin` — shared executables (global)\n- `/spark/all` — shared data (global)\n- `/spark/proj` — shared data (per project)\n\n## Vision\nPositioned as “agentic-first cloud compute” (analogous to OpenStack for VMs): infrastructure that enables new “physics” for agentic workloads, including fast scale up/down and time/space shifting of computation.\n\nKey exploration: frozen agent-built artifacts feel “dead,” so Sparks aims toward continuously agentic execution where boundaries blur between dev iteration and shipped product, static apps vs. just-in-time interfaces, and human collaboration vs. agent-mediated communication.\n\n## Validated capability\n- 2025-01-24: **Hard snapshots work with stateful apps**—Postgres survives unannounced btrfs snapshots via WAL crash recovery; suggests “fork anything anytime” can be real.\n\n## Status (as of week of 2025-01-23)\nWorking toward Sparks being able to “develop itself” by moving development “onto the inside,” refining git workflows and trust boundaries between source vs. data, and building composable primitives (“LEGOs”).","sources_add":[{"thread_id":"","event_ids":["src_01KGAKKWB9TDHWX5V9423PZ1BG"]}]}}
